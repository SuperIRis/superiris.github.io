"use strict";import ScrollMonitor from"../vendor/scrollMonitor.js";import AnimatedNumber from"../lib/AnimatedNumber.js";import EventfulClass from"../lib/EventfulClass.js";const percentageColors=["#9ac21e","#ffd43d","#00ccd3"],circles=[];class Aboutme extends EventfulClass{init(){this.graphsWatchers=[],this.setAnimateStats(),this.animateRandomFacts(),this.setSVG(),this.setScrollMonitor()}setAnimateStats(){for(var e=[],t=document.querySelectorAll(".stats-number"),s=0,a=t.length;s<a;s++){var r=new AnimatedNumber(t[s]);e.push(r),r.init()}}animateRandomFacts(){let e,t;this.randomFactsInterval=setInterval(function(){t=document.querySelector("#random-facts .active").nextElementSibling??document.querySelector("#random-facts li:nth-child(1)"),(e=document.querySelector("#random-facts .active")).classList.add("unshown"),e.classList.remove("active"),t.classList.remove("hidden"),t.classList.add("active","unshown"),setTimeout(function(){e.classList.add("hidden"),t.classList.remove("unshown")},400)},5e3)}setSVG(){if("function"!=typeof Snap)console.error("No se encuentra la librerÃ­a de Snap.svg");else{const t=new Snap("#me-about");Snap.load("images/aboutme-me.svg",e=>{this.snapLoaded||(this.characterAnimateBlink(e),t.append(e),this.snapLoaded=!0)})}}characterAnimateBlink(e){const t=e.select("#left-eye"),s=e.select("#right-eye"),a=e.select("#left-eye-closed"),r=e.select("#right-eye-closed");if(!(t&&s&&a&&r))return console.error("No se encuentran los elementos en el svg\n",t,s,a,r);a.addClass("hidden"),r.addClass("hidden"),this.svgInterval=setInterval(function(){t.addClass("hidden"),s.addClass("hidden"),a.removeClass("hidden"),r.removeClass("hidden"),setTimeout(function(){t.removeClass("hidden"),s.removeClass("hidden"),a.addClass("hidden"),r.addClass("hidden")},300)},4e3)}setScrollMonitor(){for(let e=0;e<document.querySelectorAll("#programming-skills li").length;e++)this.graphsWatchers.push(ScrollMonitor.create(document.querySelectorAll("#programming-skills li")[e],-10)),this.graphsWatchers[this.graphsWatchers.length-1].enterViewport(this.graphEntering.bind(this))}graphEntering(e,t){this.createGraph(t.querySelector("figure"))}createGraph(e){e={id:e.id,value:e.getAttribute("data-percentage"),radius:25,duration:1e3,text:function(e){return""},textClass:"circle-graph-"+this.getIdByPercentage(e.getAttribute("data-percentage")),width:5,colors:["#e1e1e1",percentageColors[this.getIdByPercentage(e.getAttribute("data-percentage"))]]};circles.push(Circles.create(e))}getIdByPercentage(e){return 90<e?0:60<e?1:2}destroy(){for(let e=0;e<this.graphsWatchers.length;e++)this.graphsWatchers[e].destroy();this.graphsWatchers.length=0,this.snapLoaded=!1,clearInterval(this.svgInterval),clearInterval(this.randomFactsInterval)}}const aboutMeSingleton=new Aboutme;export default aboutMeSingleton;