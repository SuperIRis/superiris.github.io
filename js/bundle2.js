"use strict";import Aboutme from"./sections/Aboutme.js";import AnimatedJsonSprite from"./lib/AnimatedJsonSprite.js";import AnimatedLoader from"./lib/AnimatedLoader.js";import Contact from"./sections/Contact.js";import Home from"./sections/Home.js";import Project from"./sections/project/Project.js";import Projects from"./sections/Projects.js";import{removeClassFromAll,toggleClass,trackEvent}from"./lib/Utils.js";const sections=[{enPath:["aboutme"],esPath:["acerca"],classObject:Aboutme},{enPath:["index",""],esPath:["index-es"],classObject:Home},{enPath:["contact"],esPath:["contacto"],classObject:Contact},{enPath:["projects"],esPath:["proyectos"],classObject:Projects},{enPath:["project"],esPath:["proyecto"],classObject:Project}],scriptLibraries=[{script:"snap.svg-min.js",globalName:"Snap"},{script:"circles.min.js",globalName:"Circles"},{script:"js?v=3.exp&signed_in=true",globalName:"google"}],loaderAnimation=new AnimatedJsonSprite("spritesheets/loader.png",document.getElementById("loader-me"),{loop:!0,frameRate:40,loopStartStep:4,loopEndStep:22});let currentSection,currentLanguage;function initPage(e){const t=e.substring(0,e.indexOf(".html")).substring(e.lastIndexOf("/")+1);currentSection&&currentSection.destroy();let n;e=sections.find(e=>(-1!==e.enPath.indexOf(t)?n="en":-1!==e.esPath.indexOf(t)&&(n="es"),!!n));selectCurrentSectionMenuItem(e[(currentLanguage=n)+"Path"]),selectCurrentLanguageMenuItem(currentLanguage),e.classObject.init(currentLanguage),currentSection=e.classObject}function selectCurrentLanguageMenuItem(e){document.querySelector("[data-url-lang]").classList.remove("selected"),document.querySelector(`[data-url-lang="${e}"]`).classList.add("selected")}function selectCurrentSectionMenuItem(e){document.querySelector(".main-header").classList.remove("selected"),""!==e&&document.querySelector(`.main-header [href*="${e[0]}"]`).classList.add("selected")}function setLoads(){removeClassFromAll(document.querySelectorAll(".preload"),"preload"),document.getElementById("loader").classList.add("unshown")}function handleBrowserNav(){AnimatedLoader.loadSection(window.location.href,{browserNav:!0})}function setNavigation(){document.getElementById("mobile-menu").addEventListener("click",onToggleMobileMenu),document.getElementById("main-menu").addEventListener("click",e=>{var t=e.target.closest("a");e.preventDefault(),t&&!t.classList.contains("selected")&&(t=(e=t.getAttribute("data-url-lang"))?getCurrentURLByLanguage(e):t.getAttribute("href"),AnimatedLoader.loadSection(t,{changeLanguage:!!e}))}),Projects.addEventListener("openProject",onOpenProject),Project.addEventListener("openProject",onOpenProject),Project.addEventListener("openProjects",onOpenProjects),Home.addEventListener("openProject",onOpenProject)}function onOpenProject(e){e=sections.find(e=>e.classObject===Project)[currentLanguage+"Path"]+".html#"+e;AnimatedLoader.loadSection(e)}function onOpenProjects(){var e=sections.find(e=>e.classObject===Projects)[currentLanguage+"Path"]+".html";AnimatedLoader.loadSection(e)}function getCurrentURLByLanguage(e){var t=sections.find(e=>e.classObject===currentSection);return t?t[e+"Path"][0]+".html"+window.location.hash:console.warn("Cannot find current section")}function onToggleMobileMenu(e){toggleClass(e.currentTarget,"active"),toggleClass(document.getElementById("main-container"),"mobile-menu-on"),toggleClass(document.getElementById("main-footer"),"mobile-menu-on")}AnimatedLoader.init(loaderAnimation,scriptLibraries),AnimatedLoader.addEventListener("done",initPage),initPage(window.location.href),window.addEventListener("load",setLoads),window.addEventListener("popstate",handleBrowserNav),setNavigation();