"use strict";const ajaxLoad=function(e,t){const s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&200===s.status&&t(s)},s.open("GET",e,!0),s.send()},AnimatedJsonSprite=function(e,t,s){for(var n in this.spriteURL=e,this.jsonURL=e.replace("png","json"),this.div=t,this.currentStep=0,t.style.backgroundImage="url("+e+")",this.containerHeight=this.div.offsetHeight,this.containerWidth=this.div.offsetWidth,this.animationStarted=!1,this.settings={loop:!1,loopStartStep:0,loopEndStep:0,frameRate:40,scale:1},s)this.settings.hasOwnProperty(n)&&(this.settings[n]=s[n]);ajaxLoad(this.jsonURL,this._onSpriteReady.bind(this))};AnimatedJsonSprite.prototype.start=function(){this.image&&this.image.complete?!this.animationStarted&&(this.animationStarted=!0,this.currentStep<this.steps||this.settings.loop)&&this._animateToEnd():this._onLoad=this.start},AnimatedJsonSprite.prototype.stop=function(e){this.meantToStop=!0,this.animationStarted=!1,this.restart=e||!1},AnimatedJsonSprite.prototype.hoverIn=function(e){this.image.complete?this.animationStarted||(this.animationStarted=!0,clearInterval(this.mainInterval),this.stepToStopForward=!isNaN(e)&&e<this.steps?e:this.steps,this._animateToEnd()):this._onLoad=this.hoverIn},AnimatedJsonSprite.prototype.hoverOut=function(e,t){this.image.complete?this.endAnimationStarted||(this.endAnimationStarted=!0,clearInterval(this.mainInterval),t=!isNaN(t)&&0<t&&t<=this.steps?t:0,this.stepToStopForward=this.steps,this.currentStep=!isNaN(e)&&0<e&&e<=this.steps?e:this.currentStep,this.currentStep<t?(this.forceReset=!0,this._animateToEnd()):this._animateToStart()):this._onLoad=this.hoverOut},AnimatedJsonSprite.prototype._onSpriteReady=function(e){var t,s;for(s in this.json=JSON.parse(e.response),this.spritesData=[],this.json.frames)t=Number(s.substr(-4)),this.spritesData[t]=this.json.frames[s];this.steps=this.spritesData.length-1,0===this.settings.loopEndStep&&this.settings.loop&&(this.settings.loopEndStep=this.steps),this.image=new Image;const n=this;this.image.onload=function(){n._onLoad()},this.image.src=this.spriteURL,this.image.complete&&this._onLoad(),this.div.style.width=this.spritesData[0].sourceSize.w*this.settings.scale+"px",this.div.style.height=this.spritesData[0].sourceSize.h*this.settings.scale+"px"},AnimatedJsonSprite.prototype._onLoad=function(){},AnimatedJsonSprite.prototype._animateToEnd=function(){var e=this._moveForward.bind(this);this.mainInterval=setInterval(e,this.settings.frameRate)},AnimatedJsonSprite.prototype._animateToStart=function(){var e=this._moveBackwards.bind(this);this.mainInterval=setInterval(e,this.settings.frameRate)},AnimatedJsonSprite.prototype.reset=function(e){this.currentStep=e=e||0,this.animationStarted=!1,this.endAnimationStarted=!1},AnimatedJsonSprite.prototype._moveBackwards=function(){var e={};e.x=this.spritesData[this.currentStep].frame.x*this.settings.scale,e.y=this.spritesData[this.currentStep].frame.y*this.settings.scale,this.div.style.backgroundPosition="-"+e.x+"px -"+e.y+"px",(this.currentStep<=0||this.currentStep>=this.stepToStopBackwards)&&(clearInterval(this.mainInterval),this.reset(0)),this.currentStep--},AnimatedJsonSprite.prototype._moveForward=function(){var e={};e.x=this.spritesData[this.currentStep].frame.x*this.settings.scale,e.y=this.spritesData[this.currentStep].frame.y*this.settings.scale,this.div.style.backgroundPosition="-"+e.x+"px -"+e.y+"px",this.meantToStop&&this.currentStep>=this.steps?(clearInterval(this.mainInterval),this.meantToStop=!1,this.currentStep=0,this.restart&&(this.restart=!1,this.reset(0))):(this.currentStep>=this.stepToStopForward||this.settings.loop&&this.currentStep>=this.settings.loopEndStep&&!this.meantToStop)&&(clearInterval(this.mainInterval),this.settings.loop?(this.reset(this.settings.loopStartStep),this.start()):this.forceReset&&(this.forceReset=!1,this.reset())),this.currentStep++};export default AnimatedJsonSprite;import EventfulClass from"./EventfulClass.js";import{onAllImagesLoaded}from"./Utils.js";class AnimatedLoader extends EventfulClass{getNodes(){return{body:document.querySelector("body"),loader:document.getElementById("loader"),mainHeader:document.querySelector(".main-header"),mainFooter:document.querySelector(".main-footer"),mainWrapper:document.getElementById("main-wrapper"),mainContainer:document.querySelector("#main-container"),pusher:document.getElementById("pusher")}}init(e,t){if(!e)return console.error("AnimatedLoader needs an animation from AnimatedJsonSprite");this.animation=e,this.libraries=t,this.animation.start()}showLoader(){this.nodes.loader.classList.remove("unshown"),this.nodes.body.classList.add("scroll-block"),setTimeout(()=>{this.animation.start()},700)}hideLoader(){this.nodes.body.classList.remove("scroll-block"),this.animation.stop(),setTimeout(()=>{this.nodes.loader.classList.add("unshown")},700)}cleanPageState(){document.querySelector(".selected")?.classList.remove("selected")}loadSection(e,t={}){if(!this.animation)return console.error("AnimatedLoader hasn't been initiated");var{browserNav:t=!1,changeLanguage:s=!1}=t;this.browserNav=t,this.changeLanguage=s,this.nodes=this.getNodes(),this.url=e,this.loadReady=!1,this.animationReady=!1,this.showLoader(),fetch(this.url).then(e=>e.text()).then(this.onSectionDOMReady.bind(this)),setTimeout(()=>{this.animationReady=!0,this.loadReady&&this.onLoadReady(),this.cleanPageState()},1e3)}onSectionDOMReady(e){this.loadReady=!0,this.htmlData=e,this.animationReady&&this.onLoadReady()}onLoadReady(){setTimeout(()=>{const t=document.createElement("div"),s=(t.innerHTML=this.htmlData,t.querySelector("title").innerHTML);this.nodes.mainContainer.innerHTML=t.querySelector("#main-container").innerHTML,this.changeLanguage&&(this.nodes.mainHeader.innerHTML=t.querySelector(".main-header").innerHTML,this.nodes.mainFooter.innerHTML=t.querySelector(".main-footer").innerHTML),onAllImagesLoaded(t.querySelector("#main-container")).then(()=>{var e;this.animationReady&&(e=t.querySelectorAll("script"),document.title=s,window.history.pushState&&!this.browserNav&&window.history.pushState(s,s,this.url),this.loadScriptsIfNeeded(e).then(()=>{this.trigger("done",this.url),this.hideLoader()}))})},1e3)}loadScriptsIfNeeded(e){const s=[];return e.forEach(t=>{var e=this.libraries.find(e=>-1!==t.src.indexOf(e.script));e&&!window[e.globalName]&&s.push(this.loadScript(t.src))}),Promise.all(s)}loadScript(n){return new Promise((e,t)=>{var s=document.createElement("script");document.body.appendChild(s),s.onload=e,s.onerror=t,s.async=!0,s.src=n})}}const AnimatedLoaderSingleton=new AnimatedLoader;export default AnimatedLoaderSingleton;function AnimatedNumber(e){this.domElement=e}AnimatedNumber.prototype.init=function(){this.originalNumberString=this.domElement.innerHTML,this.originalNumber=Number(this.domElement.innerHTML.replace(/\D/g,"")),this.start()},AnimatedNumber.prototype.intervalExec=function(){this.tempNumber++,-1===this.domElement.className.indexOf("appearing")?this.domElement.className=this.domElement.className+" appearing":this.domElement.className=this.domElement.className.replace("appearing",""),setTimeout(function(){},190),this.domElement.innerHTML=this.tempNumber,this.tempNumber>this.originalNumber&&(this.domElement.innerHTML=this.originalNumberString,clearInterval(this.interval))},AnimatedNumber.prototype.start=function(){this.tempNumber=0,this.interval=setInterval(this.intervalExec.bind(this),200),this.domElement.innerHTML="0"};export default AnimatedNumber;export default class EventfulClass{constructor(){this.events=[]}addEventListener(e,t){this.events.push({name:e,callback:t})}removeEventListener(t){this.events=this.events.filter(e=>e.name!==t)}removeAllEventListeners(){this.events.length=0}trigger(t,s){this.events.forEach(e=>e.name===t&&e.callback(s))}}function shuffle(e){for(var t,s,n=e.length;0<n;)s=Math.floor(Math.random()*n),t=e[--n],e[n]=e[s],e[s]=t;return e}function randomBoolean(){return Math.random()<.5}function randomFromArray(e){return e[Math.floor(Math.random()*e.length)]}function getProjectByStringID(e,t){for(var s=0,n=t.length;s<n;s++)if(t[s].stringID===e)return t[s].lastProject=0<s?t[s-1]:t[t.length-1],s===t.length-1?t[s].nextProject=t[0]:t[s].nextProject=t[s+1],t[s];return!1}function trackView(e){"undefined"!=typeof ga&&ga("send","pageview",e)}function trackEvent(e,t,s){"undefined"!=typeof ga&&ga("send","event",e,t,s)}function toggleClass(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}function removeClassFromAll(e,t){e.forEach(e=>{e.classList.remove(t)})}function preloadImage(n){return new Promise((e,t)=>{var s=document.createElement("img");s.onload=e,s.onerror=t,s.src=n})}function onAllImagesLoaded(e){return Promise.all(Array.from(e.querySelectorAll("img")??document.images).filter(e=>!e.complete).map(t=>new Promise(e=>{t.onload=t.onerror=e})))}function bulkNodeAction(t,e){e.forEach(e=>{e[t]()})}function onOpenPopup(e){e.preventDefault();var t=$(e.currentTarget).attr("href"),e=e.currentTarget.getAttribute("data-popup"),s="twitter"===e?550:500,n="twitter"===e?400:320,i=window.innerHeight/2-n/2,o=window.innerWidth/2-s/2;window.open(t,e,"width="+s+", height="+n+", left="+o+", top="+i)}function isDesktop(){return 1030<=window.innerWidth}function throttle(e,t=1e3){let s;return()=>{clearTimeout(s),s=setTimeout(()=>{e()},t)}}function appearOutphased(t,e,s=1e3){let n=0;setTimeout(()=>{for(let e=0;e<t.length;e++)setTimeout(()=>{t[n].classList.remove("unshown"),n++},(e+1)*s)},e)}function getProjects(e){return fetch("es"===e?"../../data/projects-es.json":"../../data/projects.json").then(e=>e.json()).then(e=>e.projects)}import ScrollMonitor from"../vendor/scrollMonitor.js";import AnimatedNumber from"../lib/AnimatedNumber.js";import EventfulClass from"../lib/EventfulClass.js";const percentageColors=["#9ac21e","#ffd43d","#00ccd3"],circles=[];class Aboutme extends EventfulClass{init(){this.graphsWatchers=[],this.setAnimateStats(),this.animateRandomFacts(),this.setSVG(),this.setScrollMonitor()}setAnimateStats(){for(var e=[],t=document.querySelectorAll(".stats-number"),s=0,n=t.length;s<n;s++){var i=new AnimatedNumber(t[s]);e.push(i),i.init()}}animateRandomFacts(){let e,t;this.randomFactsInterval=setInterval(function(){t=document.querySelector("#random-facts .active").nextElementSibling??document.querySelector("#random-facts li:nth-child(1)"),(e=document.querySelector("#random-facts .active")).classList.add("unshown"),e.classList.remove("active"),t.classList.remove("hidden"),t.classList.add("active","unshown"),setTimeout(function(){e.classList.add("hidden"),t.classList.remove("unshown")},400)},5e3)}setSVG(){if("function"!=typeof Snap)console.error("No se encuentra la librería de Snap.svg");else{const t=new Snap("#me-about");Snap.load("images/aboutme-me.svg",e=>{this.snapLoaded||(this.characterAnimateBlink(e),t.append(e),this.snapLoaded=!0)})}}characterAnimateBlink(e){const t=e.select("#left-eye"),s=e.select("#right-eye"),n=e.select("#left-eye-closed"),i=e.select("#right-eye-closed");if(!(t&&s&&n&&i))return console.error("No se encuentran los elementos en el svg\n",t,s,n,i);n.addClass("hidden"),i.addClass("hidden"),this.svgInterval=setInterval(function(){t.addClass("hidden"),s.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden"),setTimeout(function(){t.removeClass("hidden"),s.removeClass("hidden"),n.addClass("hidden"),i.addClass("hidden")},300)},4e3)}setScrollMonitor(){for(let e=0;e<document.querySelectorAll("#programming-skills li").length;e++)this.graphsWatchers.push(ScrollMonitor.create(document.querySelectorAll("#programming-skills li")[e],-10)),this.graphsWatchers[this.graphsWatchers.length-1].enterViewport(this.graphEntering.bind(this))}graphEntering(e,t){this.createGraph(t.querySelector("figure"))}createGraph(e){e={id:e.id,value:e.getAttribute("data-percentage"),radius:25,duration:1e3,text:function(e){return""},textClass:"circle-graph-"+this.getIdByPercentage(e.getAttribute("data-percentage")),width:5,colors:["#e1e1e1",percentageColors[this.getIdByPercentage(e.getAttribute("data-percentage"))]]};circles.push(Circles.create(e))}getIdByPercentage(e){return 90<e?0:60<e?1:2}destroy(){for(let e=0;e<this.graphsWatchers.length;e++)this.graphsWatchers[e].destroy();this.graphsWatchers.length=0,this.snapLoaded=!1,clearInterval(this.svgInterval),clearInterval(this.randomFactsInterval)}}const aboutMeSingleton=new Aboutme;export default aboutMeSingleton;class Contact{init(){this.setFreelanceStatusSVG(),this.setMap(),google.maps.event.addDomListener(window,"resize",this.resizeMap.bind(this))}setFreelanceStatusSVG(){if("function"!=typeof Snap)console.error("No se encuentra la librería de Snap.svg");else{const t=new Snap("#me-working-status");Snap.load("images/freelance-status.svg",e=>{this.snapLoaded||(this.svgAnimate(e),this.setAvailability(e),t.append(e),this.snapLoaded=!0)})}}svgAnimate(e){const t=e.select("#svg-screen"),s=e.select("#svg-arms");let n=0;this.svgInterval=setInterval(function(){n++,t.animate({fill:n%2==0?"#fff":"#ccc"},200),n%7==0?(s.removeClass("arms-down"),s.addClass("arms-up")):(s.removeClass("arms-up"),s.addClass("arms-down"))},700)}setAvailability(e){var t=Number(document.getElementById("availability-percentage")?.getAttribute("value")??0);const s=10-Math.round(t/10),n=e.select("#papers");let i=1;for(;n.select("rect:nth-child("+i+")");)n.select("rect:nth-child("+i+")").addClass("paper-out"),i++;i=1;const o=setInterval(function(){!n.select("rect:nth-child("+(i+10)+")")||i>s?clearInterval(o):(n.select("rect:nth-child("+i+")").removeClass("paper-out"),n.select("rect:nth-child("+i+")").addClass("paper-in"),n.select("rect:nth-child("+(i+10)+")").removeClass("paper-out"),n.select("rect:nth-child("+(i+10)+")").addClass("paper-in"),i++)},200)}setMap(){void 0!==this.map&&console.warn("Map already created"),this.whereIAm=new google.maps.LatLng(37.6852183,-122.1817252);const e=new google.maps.LatLng(37.4592183,-122.1817252);var t=this.getMapOptions();this.map=new google.maps.Map(document.getElementById("map"),t),setTimeout(()=>{this.addMarker(e)},1500)}getMapOptions(e){return{zoom:9,center:this.whereIAm,mapTypeId:e,disableDefaultUI:!0,draggable:!1,backgroundColor:"#fff",disableDoubleClickZoom:!0,scrollwheel:!1,maxZoom:15}}addMarker(e){var t=new google.maps.MarkerImage("images/marker-silicon.png",null,null,null,new google.maps.Size(144,192));this.marker=new google.maps.Marker({position:e,map:this.map,flat:!0,title:"SuperIRis",icon:t,optimized:!1,animation:google.maps.Animation.DROP})}resizeMap(){this.map.setCenter(this.whereIAm)}destroy(){google.maps.event.clearListeners(window,"resize"),google.maps.event.clearListeners(window,"load"),clearInterval(this.svgInterval),this.snapLoaded=!1}}const contactSingleton=new Contact;export default contactSingleton;import{getProjects,preloadImage}from"../lib/Utils.js";import ScrollMonitor from"../vendor/scrollMonitor.js";import AnimatedJsonSprite from"../lib/AnimatedJsonSprite.js";import EventfulClass from"../lib/EventfulClass.js";import{trackEvent}from"../lib/Utils.js";const PROJECTS=[];class Home extends EventfulClass{init(e){this.setHomeAnimation(),getProjects(e).then(e=>{this.projects=e.filter(e=>e.images&&e.images.home),this.setProjects()}),document.getElementById("home-down-btn").addEventListener("click",this.onScrollToProjects)}onScrollToProjects(){var e=document.getElementById("intro-container").offsetHeight+86;window.scrollTo({top:e,behavior:"smooth"})}setHomeAnimation(){var e=["libro","normal","ds"],e=e[Math.floor(Math.random()*e.length)];this.homeMe=new AnimatedJsonSprite("spritesheets/homes-"+e+".png",document.getElementById("me"),{loop:!0,frameRate:40}),this.homeMe.start()}setProjects(){var e=document.querySelectorAll("#projects-preview-list li");this.loadedProjects=0,e.forEach(this.populateProjectData.bind(this))}populateProjectData(e,t){e.querySelector(".project-title").innerHTML=this.projects[t].name,e.querySelector(".project-tech").innerHTML=this.projects[t].tech,e.querySelector("a").setAttribute("data-project",this.projects[t].stringID),e.querySelector("a").addEventListener("click",this.onProjectClick.bind(this)),preloadImage("images/projects/"+this.projects[t].images.home).then(()=>{this.onProjectImageLoaded(e,t)})}onProjectImageLoaded(e,t){e.querySelector(".project-preview-item").style.backgroundImage=`url(images/projects/${this.projects[t].images.home})`,e.classList.remove("loading"),this.loadedProjects++,this.loadedProjects===this.projects.length&&this.setScrollMonitor()}setScrollMonitor(){this.projectsWatcher=ScrollMonitor.create(document.querySelectorAll("#projects-preview-list li")[0],-10),this.projectsWatcher.enterViewport(function(){document.getElementById("projects-preview-list").classList.remove("unshown")}),this.projectsWatcher.exitViewport(function(){document.getElementById("projects-preview-list").classList.add("unshown")})}onProjectClick(e){e.preventDefault(),this.homeMe.stop(),this.trigger("openProject",e.currentTarget.getAttribute("data-project"))}destroy(){this.homeMe=null,this.projectsWatcher.destroy(),this.loadedProjects=0}}const homeSingleton=new Home;export default homeSingleton;import EventfulClass from"../lib/EventfulClass.js";import{getProjects}from"../lib/Utils.js";class Projects extends EventfulClass{init(e){this.list=[],this.language=e,this.projects=getProjects(e).then(e=>{this.projects=e,this.orderDisplayByImportance(),this.setProjects()}),document.getElementById("projects-list").addEventListener("click",this.onGoToProject.bind(this))}orderDisplayByImportance(){let t=0;for(let e=0;e<this.projects.length;e++)4<(t+=this.projects[e].importance)?(t=0,this.list.push(this.getProjectByImportance(1,e)),e--):(4===t&&(t=0),this.list.push(this.projects[e]))}getProjectByImportance(s,n){for(let e=n,t=this.projects.length;e<t;e++)if(s===this.projects[e].importance)return this.projects.splice(e,1)[0]}setProjects(){this.originalProject=document.querySelector(".project:first-child"),this.originalProject.remove();var t=document.getElementById("projects-list");t.innerHTML="",t.remove();for(let e=0;e<this.list.length;e++)t.append(this.createProject(this.list[e]));document.getElementById("main-container").prepend(t)}createProject(e){var t=this.originalProject.cloneNode(!0);return t.querySelector("h1").innerHTML=e.client,t.querySelector("h2").innerHTML=e.name,t.querySelector("h3").innerHTML=e.tech,t.querySelector(".extra-info").innerHTML=e.participation,t.setAttribute("data-project",e.stringID),t.querySelector("s2")?.classList.remove("s2"),t.querySelector("s1")?.classList.remove("s1"),t.classList.add("s"+e.importance),e.images.thumb&&(t.style.backgroundImage="url(images/projects/"+e.images.thumb+")"),t}onGoToProject(e){e.preventDefault();e=e.target.closest(".project");e&&(console.log(e),this.trigger("openProject",e.getAttribute("data-project")))}destroy(){}}const projectsSingleton=new Projects;export default projectsSingleton;import EventfulClass from"../../lib/EventfulClass.js";import{getProjects}from"../../lib/Utils.js";import{bulkNodeAction,getProjectByStringID,isDesktop,throttle,appearOutphased}from"../../lib/Utils.js";import{slideImages,changeExtraBtnTxtToMinus,changeMinusBtnTxtToExtra}from"./ProjectVisualEffectsUtils.js";import VideoHandler from"./VideoHandler.js";class Project extends EventfulClass{init(e){this.id=window.location.hash,getProjects(e).then(e=>{this.info=getProjectByStringID(this.id.substring(1),e),this.info?this.populateData():window.location="/"}),this.isDesktop=isDesktop(),this.nodes=this.getNodes(),this.removeSetupNodes(),this.addSetupEvents()}getNodes(){var e={};return e.container=document.querySelector(".project-container"),e.name=document.getElementById("project-name"),e.type=document.getElementById("project-type"),e.typeLink=e.type.querySelector("a"),e.listContainer=document.getElementById("project-list-container"),e.list=document.getElementById("project-list"),e.listItem=e.list.querySelector("li"),e.gallery=document.getElementById("project-gallery"),e.galleryItem=e.gallery.querySelector("li"),e.extraInfo=document.getElementById("extra-info-sec"),e.extraInfoBtn=document.getElementById("extra-info-sec-btn"),e.nextBtn=document.getElementById("next-btn"),e.lastBtn=document.getElementById("last-btn"),e.closeBtn=document.getElementById("close-btn"),e.year=document.getElementById("project-year"),e.via=document.getElementById("project-via"),e.participation=document.getElementById("project-participation"),e.about=document.getElementById("project-about"),e.technically=document.getElementById("project-technically"),e.curious=document.getElementById("project-curious"),e.galleryContainer=document.getElementById("project-gallery-container"),e.fakeVideoContainer=document.getElementById("fake-video-container"),e.video=document.getElementById("project-video"),e.videoContainer=document.getElementById("video-container"),e.overlay=document.getElementById("info-overlay"),e}removeSetupNodes(){bulkNodeAction("remove",[this.nodes.typeLink,this.nodes.list,this.nodes.listItem,this.nodes.gallery,this.nodes.galleryItem])}addSetupEvents(){this.nodes.extraInfoBtn.addEventListener("click",this.onExtraInfoClick.bind(this)),this.nodes.nextBtn.addEventListener("click",this.onGoToProject.bind(this)),this.nodes.lastBtn.addEventListener("click",this.onGoToProject.bind(this)),this.nodes.closeBtn.addEventListener("click",this.onCloseProjects.bind(this))}hasVideo(){return this.info.video&&5<this.info.video.length}shouldShowVideo(){return isDesktop()}populateData(){this.populateMainInfo(),this.populateNavButtons(),this.populateExtrainfo(),this.populateFactsList(),this.populateImagesOrVideo(),this.throttledResize=throttle(this.onResize.bind(this)),window.addEventListener("resize",this.throttledResize)}populateMainInfo(){this.nodes.name.innerHTML=this.info.name,this.nodes.type.innerHTML=this.info.type,this.info.urls[0]&&(this.nodes.typeLink.setAttribute("href",this.info.urls[0]),this.nodes.type.append(this.nodes.typeLink))}populateNavButtons(){this.nodes.lastBtn.setAttribute("data-id",this.info.lastProject.stringID),this.nodes.lastBtn.querySelector(".title").innerHTML=this.info.lastProject.name,this.nodes.nextBtn.setAttribute("data-id",this.info.nextProject.stringID),this.nodes.nextBtn.querySelector(".title").innerHTML=this.info.nextProject.name}populateExtrainfo(){this.nodes.year.innerHTML=this.info.year,this.nodes.via.innerHTML=this.info.via,this.nodes.participation.innerHTML=this.info.participation,this.nodes.about.innerHTML=this.info.about.replace(/\n/g,"</p><p>"),this.nodes.technically.innerHTML=this.info.technically,this.nodes.curious.innerHTML=this.info.curious}populateFactsList(){var t;for(let e=0;e<this.info.list.length;e++)(t=this.nodes.listItem.cloneNode(!0)).querySelector("i").classList.add("fa-"+this.info.list[e].icon),t.append(this.info.list[e].info),this.nodes.list.append(t);this.nodes.listContainer.append(this.nodes.list)}populateImages(){var t;for(let e=0;e<this.info.images.detail.length;e++)(t=this.nodes.galleryItem.cloneNode(!0)).classList.add("unshown"),t.querySelector("img").setAttribute("src","images/projects/"+this.info.images.detail[e]),this.nodes.gallery.append(t);appearOutphased(this.nodes.gallery.children,1e3),this.nodes.galleryContainer.append(this.nodes.gallery)}populateImageBackground(){this.nodes.fakeVideoContainer.setAttribute("src","images/projects/"+this.info.images.detail[0]),this.nodes.fakeVideoContainer.classList.add("unshown"),this.nodes.fakeVideoContainer.classList.remove("hidden"),setTimeout(()=>{this.nodes.fakeVideoContainer.classList.remove("unshown")},100)}populateVideo(){this.videoId=this.info.video.substr(this.info.video.indexOf("embed/")+6),this.videoHandler=new VideoHandler(this.nodes.videoContainer,this.videoId)}populateVideoAlternative(){this.nodes.fakeVideoContainer.classList.add("hidden"),this.nodes.videoContainer.classList.add("video-container"),this.sliderInterval=slideImages(this.nodes.videoContainer,this.nodes.container,this.info.images.detail)}populateImagesOrVideo(){this.hasVideo()&&this.shouldShowVideo()?this.populateVideo():this.shouldShowVideo()?this.populateVideoAlternative():(this.populateImages(),this.populateImageBackground())}onResize(){this.isDesktop!==isDesktop()&&(this.destroyVideo(),this.destroyImageSlider(),this.nodes.gallery.innerHTML="",this.populateImagesOrVideo(),this.isDesktop=isDesktop())}onExtraInfoClick(e){e=e.currentTarget;e.disabled||(e.disabled=!0,this.nodes.extraInfo.classList.contains("unshown")?this.showExtraInfo(e):this.hideExtraInfo(e))}showExtraInfo(e){this.nodes.overlay.classList.remove("hidden"),this.nodes.extraInfo.classList.remove("hidden");const t=this.nodes.extraInfo.offsetTop;changeExtraBtnTxtToMinus(this.nodes.extraInfoBtn),setTimeout(()=>{this.nodes.overlay.classList.remove("unshown"),window.scrollTo({top:t,behavior:"smooth"})},100),setTimeout(()=>{this.nodes.extraInfo.classList.remove("unshown"),e.disabled=!1},500)}hideExtraInfo(e){this.nodes.extraInfo.classList.add("unshown"),window.scrollTo({top:0,behavior:"smooth"}),changeMinusBtnTxtToExtra(this.nodes.extraInfoBtn),setTimeout(()=>{this.nodes.overlay.classList.add("unshown")},500),setTimeout(()=>{isDesktop()&&this.nodes.overlay.classList.add("hidden"),this.nodes.extraInfo.classList.add("hidden"),e.disabled=!1},1e3)}onGoToProject(e){this.trigger("openProject",e.currentTarget.getAttribute("data-id"))}onCloseProjects(e){e.currentTarget.setAttribute("href","proyectos.html"),this.trigger("openProjects")}destroy(){this.destroyVideo(),this.destroyImageSlider(),window.removeEventListener("resize",this.throttledResize)}destroyVideo(){this.videoHandler?.destroy()}destroyImageSlider(){clearInterval(this.sliderInterval)}}const projectSingleton=new Project;export default projectSingleton;function slideImages(e,t,s){let n=0;return e.style.backgroundImage="url(images/projects/"+s[n]+")",t.classList.add("transition"),setInterval(()=>{++n===s.length&&(n=0),t.classList.add("dark"),setTimeout(()=>{t.classList.remove("dark"),e.style.backgroundImage="url(images/projects/"+s[n]+")"},1e3)},8e3)}function changeExtraBtnTxtToMinus(e){setTimeout(()=>{e.innerHTML="MXTRA INFO"},500),setTimeout(()=>{e.innerHTML="METRA INFO"},650),setTimeout(()=>{e.innerHTML="MENRA INFO"},800),setTimeout(()=>{e.innerHTML="MENOA INFO"},950),setTimeout(()=>{e.innerHTML="MENOS INFO"},1100)}function changeMinusBtnTxtToExtra(e){setTimeout(()=>{e.innerHTML="EXTRA INFO"},1100),setTimeout(()=>{e.innerHTML="MXTRA INFO"},950),setTimeout(()=>{e.innerHTML="METRA INFO"},800),setTimeout(()=>{e.innerHTML="MENRA INFO"},650),setTimeout(()=>{e.innerHTML="MENOA INFO"},500)}export default class VideoHandler{constructor(e,t){this.videoId=t,this.container=e,this.settings={playsinline:1,autoplay:1,controls:0,disablekb:1,enablejsapi:1,loop:1,rel:0},window.YT?this.onYouTubeIframeAPIReady():(window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady,this.loadYTAPI())}loadYTAPI(){var e=document.createElement("script"),t=(e.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}onYouTubeIframeAPIReady=()=>{this.player=new window.YT.Player(this.container,{height:window.innerHeight,width:window.innerWidth,videoId:this.videoId,playerVars:this.settings,events:{onReady:this.onVideoReady,onStateChange:this.onPlayerStateChange.bind(this)}})};onVideoReady(e){e.target.mute(),e.target.playVideo()}onPlayerStateChange(e){e.data==YT.PlayerState.ENDED&&this.player.playVideo()}destroy(){this.player.destroy()}}import Aboutme from"./sections/Aboutme.js";import AnimatedJsonSprite from"./lib/AnimatedJsonSprite.js";import AnimatedLoader from"./lib/AnimatedLoader.js";import Contact from"./sections/Contact.js";import Home from"./sections/Home.js";import Project from"./sections/project/Project.js";import Projects from"./sections/Projects.js";import{removeClassFromAll,toggleClass,trackEvent}from"./lib/Utils.js";const sections=[{enPath:["aboutme"],esPath:["acerca"],classObject:Aboutme},{enPath:["index",""],esPath:["index-es"],classObject:Home},{enPath:["contact"],esPath:["contacto"],classObject:Contact},{enPath:["projects"],esPath:["proyectos"],classObject:Projects},{enPath:["project"],esPath:["proyecto"],classObject:Project}],scriptLibraries=[{script:"snap.svg-min.js",globalName:"Snap"},{script:"circles.min.js",globalName:"Circles"},{script:"js?v=3.exp&signed_in=true",globalName:"google"}],loaderAnimation=new AnimatedJsonSprite("spritesheets/loader.png",document.getElementById("loader-me"),{loop:!0,frameRate:40,loopStartStep:4,loopEndStep:22});let currentSection,currentLanguage;function initPage(e){const t=e.substring(0,e.indexOf(".html")).substring(e.lastIndexOf("/")+1);currentSection&&currentSection.destroy();let s;e=sections.find(e=>(-1!==e.enPath.indexOf(t)?s="en":-1!==e.esPath.indexOf(t)&&(s="es"),!!s));selectCurrentSectionMenuItem(e[(currentLanguage=s)+"Path"]),selectCurrentLanguageMenuItem(currentLanguage),e.classObject.init(currentLanguage),currentSection=e.classObject}function selectCurrentLanguageMenuItem(e){document.querySelector("[data-url-lang]").classList.remove("selected"),document.querySelector(`[data-url-lang="${e}"]`).classList.add("selected")}function selectCurrentSectionMenuItem(e){document.querySelector(".main-header").classList.remove("selected"),""!==e&&document.querySelector(`.main-header [href*="${e[0]}"]`).classList.add("selected")}function setLoads(){removeClassFromAll(document.querySelectorAll(".preload"),"preload"),document.getElementById("loader").classList.add("unshown")}function handleBrowserNav(){AnimatedLoader.loadSection(window.location.href,{browserNav:!0})}function setNavigation(){document.getElementById("mobile-menu").addEventListener("click",onToggleMobileMenu),document.getElementById("main-menu").addEventListener("click",e=>{var t=e.target.closest("a");e.preventDefault(),t&&!t.classList.contains("selected")&&(t=(e=t.getAttribute("data-url-lang"))?getCurrentURLByLanguage(e):t.getAttribute("href"),AnimatedLoader.loadSection(t,{changeLanguage:!!e}))}),Projects.addEventListener("openProject",onOpenProject),Project.addEventListener("openProject",onOpenProject),Project.addEventListener("openProjects",onOpenProjects),Home.addEventListener("openProject",onOpenProject)}function onOpenProject(e){e=sections.find(e=>e.classObject===Project)[currentLanguage+"Path"]+".html#"+e;AnimatedLoader.loadSection(e)}function onOpenProjects(){var e=sections.find(e=>e.classObject===Projects)[currentLanguage+"Path"]+".html";AnimatedLoader.loadSection(e)}function getCurrentURLByLanguage(e){var t=sections.find(e=>e.classObject===currentSection);return t?t[e+"Path"][0]+".html"+window.location.hash:console.warn("Cannot find current section")}function onToggleMobileMenu(e){toggleClass(e.currentTarget,"active"),toggleClass(document.getElementById("main-container"),"mobile-menu-on"),toggleClass(document.getElementById("main-footer"),"mobile-menu-on")}AnimatedLoader.init(loaderAnimation,scriptLibraries),AnimatedLoader.addEventListener("done",initPage),initPage(window.location.href),window.addEventListener("load",setLoads),window.addEventListener("popstate",handleBrowserNav),setNavigation();export{shuffle,randomBoolean,randomFromArray,getProjectByStringID,trackView,trackEvent,toggleClass,removeClassFromAll,preloadImage,onAllImagesLoaded,bulkNodeAction,onOpenPopup,isDesktop,throttle,appearOutphased,getProjects,slideImages,changeExtraBtnTxtToMinus,changeMinusBtnTxtToExtra};